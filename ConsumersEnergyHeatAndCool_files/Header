function SendKmliEvent(){window.dataLayer&&window.dataLayer.push({event:"eventTracking",category:"Login",action:"KMLI",label:"Remembered Session"})}function SendSuccessfulLogin(n){window.dataLayer&&window.dataLayer.push({event:"eventTracking",category:"Login",action:n+" Verification Step",label:"Successful Login"})}function EnableKmli(){window.location.href="/api/sitecore/CeAuth/EnableKmli?returnUrl="+window.location.pathname}function loadBalanceFrames(n){var t=$(".balanceFrame");t.length>0&&lazyAccountLoginBalance(t,n)}function viewFrameDetails(n){$.ajax({url:"/api/sitecore/AccountSummary/ViewDetails",data:{accountNumber:n},datatype:"json",type:"GET",context:this,success:function(n){n!=null&&(window.location.href=n)},error:function(n){objectLogout.autoLogoutAjax(n)}})}function lazyAccountLoginBalance(n,t){var r={Mobile:"",Desktop:""},u="/api/sitecore/CurrentBalance/GetNewHeaderStatusAccountLogin",i={UrlAction:"",IsMultipleAccount:"",IsMobile:!1,AccountDetailsLink:"",SitecoreContext:""},f;n.each(function(t){i.UrlAction=u;i.IsMobile=$(n[t]).data("ismobile");checkForValue.IsStringValue(i.SitecoreContext)&&(i.SitecoreContext=window.encodeURIComponent(i.SitecoreContext.replace("{","").replace("}","")));i.IsMobile==!0?r.Mobile=_.clone(i):r.Desktop=_.clone(i)});f={ViewModel:r,RefreshRequest:t,__RequestVerificationToken:jQuery("input[name=__RequestVerificationToken]").val()};$(".balanceFrame").load(u,f,function(n,t){t=="success"?n===undefined||n===""?window.location.href="/Login":n==="IsCustomerAdmin"||(document.querySelector(".ev-unable-info")?($(".wp_login-block, .single-account-log").addClass("d-flex align-items-center justify-content-between"),$(".ev-show-logout").removeClass("d-none")):document.querySelector(".accountLogin-amount")&&($(".accountLogin-amount").each(function(n){var t=$(".accountLogin-amount")[n],i=ce_app.payments.formatCurrency($(t).html());$(t).html(i)}),ToggleCircleButton(),ToggleAngleButton()),arrowAccountClick()):t=="error"&&objectLogout.isNotAutoLogoutAjax(n)&&$(".lyt-login").length&&n!=null&&n.status!=500&&(n.readyState===undefined||n.indexOf("lyt-login"))&&(window.location.href="/login")})}function getBusinessPartnerType(){var n=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"/api/sitecore/CeAuth/GetBusinessPartnerType",data:{__RequestVerificationToken:n},datatype:"json",type:"POST",context:this,success:function(n){var t,i;n=="person"?(t=setInterval(function(){$(".to-show-residential").removeClass("d-none")},200),setTimeout(function(){clearInterval(t)},1e4)):n=="organization"&&(i=setInterval(function(){$(".to-show-business").removeClass("d-none")},200),setTimeout(function(){clearInterval(i)},1e4))},error:function(){console.log("Error in GetBusinessPartnerType")}})}function disableMyAccount(){var n=document.querySelector(".btn.btn-primary.ctrl-primary-button.btn-alt.btn-login-toggle");n.id!="navbarloginButton"&&(n.disabled=!0)}function isUnderMaintenance(){const n=document.cookie.split(";").find(n=>n.trim().startsWith("maintenance="));return n&&n.split("=")[1]==="true"}function setMaintenanceStatus(n){const t=new Date;t.setTime(t.getTime()+9e5);document.cookie=`maintenance=${n}; expires=${t.toUTCString()}; path=/`}function waitForElement(n,t,i){var r=setInterval(function(){$(n).length&&(clearInterval(r),i())},t)}function arrowAccountClick(){$(".log-in-home").off("click",".account");$(".log-in-home").on("click",".account",function(n){n.target.classList.contains("payNowButton")||(n.stopPropagation(),$(this).toggleClass("closed"))})}var ce_app=ce_app||{},LoadAuthenticatedPaymentPageHeader=function(n){var i=n.data("source-id"),r=n.data("accountid"),u=n.hasClass("schedule-payment-btn"),t="?caNumber=";r&&(t+=r);t+="&dataSource=";i&&(t+=i);u&&(t+="&schedule");window.location.href="/make-a-payment-auth"+t};$(function(){var n,t;$(".to-show-residential").length&&$(".to-show-business").length&&getBusinessPartnerType(),function(){this.payments={truncateFloat:function(n){if(n===null||isNaN(n))return NaN;var t=n.toFixed(3).slice(0,-1);return parseFloat(t)},formatCurrency:function(n){var t=n||0;return t.replace&&(t=n.replace(/[$,]/g,"")),t=parseFloat(t),isNaN(t)&&(t=0),t=Math.abs(t),t=t.toFixed(3).slice(0,-1),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,","),"$"+t}}}.apply(ce_app);$("#login-dropdown-form-mobile").on("keyup keypress keydown",function(n){n.keyCode===13&&$("#loginButtonDropdownMobile").click()});if($(".ev-login-navigation-bar-btn").click(function(n){n.preventDefault();var t=$(this).closest("form");t.parsley().validate()&&SubmitButtonForLogin(t,$(this),"Navigation Bar")}),$(".ev-login-page-btn").click(function(n){n.preventDefault();var t=$(this).closest("form");t.parsley().validate()&&SubmitButtonForLogin(t,$(this),"Login Page")}),$(".lyt-account-summary-container").length==0&&loadBalanceFrames(!1),navigator.appName!="Microsoft Internet Explorer"&&!(navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/rv:11/))&&(typeof $.browser=="undefined"||$.browser.msie!=1)||$(".header-nav-container .btn-login-toggle").click(function(){$(".remove-ie .account-need-attention").length>0&&$(".remove-ie").removeClass("row")}),n=objectCookie.getCookie("ln"),sessionStorage.alreadySent||n===""||(SendKmliEvent(),sessionStorage.alreadySent="true"),sessionStorage.methodType!==""&&(SendSuccessfulLogin(sessionStorage.methodType),sessionStorage.methodType=""),$(".template-1440.msp_master.two-col-template.clearfix").length&&$(".header-div1440").length&&$(".header-div1440").addClass("template-1440"),$("#email-form").submit(function(){var i=$(".wp-header-container").data(),n="",t="",r=$(this),u=$("#updateEmail").val();return u==="update-email-dnu"?(t={__RequestVerificationToken:jQuery("input[name=__RequestVerificationToken]").val(),EmailAddress:$("#emailInput").val(),ConfirmEmailAddress:$("#emailInput").val(),IsPrimaryEmail:!0,returnResults:!1},n=i.updatednuemail):(t=r.serialize(),n=i.migrateaccounturl),r.parsley().isValid()&&(startLoadingButton($("#noEmailBannerButton")),$.ajax({method:"POST",url:n,cache:!1,data:t}).success(function(){$("#updateEmail").val("");$(".msp-noemail-overlay").hide();$(".wp-email-dashboard").slideToggle();window.location.reload()}).fail(function(n){objectLogout.isNotAutoLogoutAjax(n)&&console.log("Error hidding",n)}).always(function(){endLoadingButton($("#noEmailBannerButton"))})),!1}),t=function(){return!!(typeof Sitecore!="undefined"&&Sitecore&&Sitecore.PageModes&&Sitecore.PageModes.PageEditor)},!t()){var i=$(".keeploggedin-modal").length>0,r=objectCookie.getCookie("ce_KeepLoggedIn")=="",u=objectCookie.getCookie("ce_IsFirstLogin")=="false",f=objectCookie.getCookie("ln").length==0;i&&r&&u&&f&&($(".keeploggedin-modal").modal("show"),$("#RememberKeepMeLoggedIn").click(function(){$(".keeploggedin-modal").modal("hide");EnableKmli()}),$(".ev-ForgetKeepMeLoggedIn").click(function(){$(".keeploggedin-modal").modal("hide");objectCookie.setCookie("","ce_KeepLoggedIn","ForgetKeepMeLoggedIn",365)}))}$(".ctrl_empowering-you").click(function(){$(this).data("url").length>0&&window.innerWidth<768&&(window.location.href=$(this).data("url"))});$("header").on("click","#firstViewDetailsLinkDesktop, #secondViewDetailsLinkDesktop, #firstViewDetailsLinkMobile, #secondViewDetailsLinkMobile",function(){window.dataLayer&&dataLayer.push({event:"eventTracking",category:"Bill Pay",action:"View Account Details Link",label:"View Account Details"});var n=$(this).data("details");viewFrameDetails(n)});$(".mobile-header-container .res-buss-switch").on("click",function(){$(".mobile-header-container .switch input").prop("checked")?$(".mobile-header-container").addClass("business"):$(".mobile-header-container").removeClass("business")});$(".desktop-header-container .res-buss-switch").on("click",function(){$(".desktop-header-container .switch input").prop("checked")?($(".desktop-header-container").addClass("business"),$(".desktop-header-container").removeClass("residential")):($(".desktop-header-container").removeClass("business"),$(".desktop-header-container").addClass("residential"))})});document.addEventListener("DOMContentLoaded",function(){var n=window.location.pathname;n==="/"?isUnderMaintenance()&&setMaintenanceStatus(!1):n==="/general-maintenance"?(disableMyAccount(),isUnderMaintenance()||setMaintenanceStatus(!0)):isUnderMaintenance()&&disableMyAccount()});$(document).ready(function(){waitForElement(".homepage-header .searchbox-container input.gsc-input",100,function(){$(".homepage-header .searchbox-container input.gsc-input").attr("placeholder","Search Consumers Energy...")})});$(document).ready(function(){var n=$(".filter-sort .dropdown-menu li").eq(0);$("#selectedValue").text(n.text());$(".filter-sort .dropdown-menu li").click(function(){$("#selectedValue").text($(this).text());$(this).parent(".dropdown-menu").parent(".dropdown").removeClass("open")})})